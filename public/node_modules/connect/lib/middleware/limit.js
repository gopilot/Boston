var utils=require("../utils");module.exports=function(e){if("string"==typeof e&&(e=utils.parseBytes(e)),"number"!=typeof e)throw new Error("limit() bytes required");return function(t,n,r){var i=0,o=t.headers["content-length"]?parseInt(t.headers["content-length"],10):null;return t._limit?r():(t._limit=!0,o&&o>e?r(utils.error(413)):(t.on("data",function(n){i+=n.length,i>e&&t.destroy()}),r(),void 0))}};