module.exports=function(e,t){if(!e)throw new Error("vhost hostname required");if(!t)throw new Error("vhost server required");var n=new RegExp("^"+e.replace(/[*]/g,"(.*?)")+"$","i");return t.onvhost&&t.onvhost(e),function(e,r,i){if(!e.headers.host)return i();var o=e.headers.host.split(":")[0];return n.test(o)?"function"==typeof t?t(e,r,i):(t.emit("request",e,r),void 0):i()}};