var utils=require("../../utils"),Session=module.exports=function(e,t){Object.defineProperty(this,"req",{value:e}),Object.defineProperty(this,"id",{value:e.sessionID}),"object"==typeof t&&utils.merge(this,t)};Session.prototype.touch=function(){return this.resetMaxAge()},Session.prototype.resetMaxAge=function(){return this.cookie.maxAge=this.cookie.originalMaxAge,this},Session.prototype.save=function(e){return this.req.sessionStore.set(this.id,this,e||function(){}),this},Session.prototype.reload=function(e){var t=this.req,n=this.req.sessionStore;return n.get(this.id,function(r,i){return r?e(r):i?(n.createSession(t,i),e(),void 0):e(new Error("failed to load session"))}),this},Session.prototype.destroy=function(e){return delete this.req.session,this.req.sessionStore.destroy(this.id,e),this},Session.prototype.regenerate=function(e){return this.req.sessionStore.regenerate(this.req,e),this};